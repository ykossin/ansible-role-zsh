# Конфигурация Powerlevel10k
# Сгенерировано Ansible ролью zsh
# Дата: {{ ansible_date_time.iso8601 }}
# 
# ВАЖНО: Это базовая конфигурация. Для полной настройки выполните: p10k configure
# Это запустит интерактивный мастер настройки

# Настройки локали - английская по умолчанию, но с поддержкой кириллицы
export LANG={{ zsh_locale_default }}
export LC_ALL={{ zsh_locale_default }}
export LC_CTYPE={{ zsh_locale_default }}

# Основные настройки Powerlevel10k
# Используем современный синтаксис Powerlevel10k
typeset -g POWERLEVEL9K_MODE='nerdfont-complete'
typeset -ga POWERLEVEL9K_LEFT_PROMPT_ELEMENTS=(os_icon dir vcs)
typeset -ga POWERLEVEL9K_RIGHT_PROMPT_ELEMENTS=(status root_indicator background_jobs history time)

# Включаем instant prompt для быстрой загрузки (может вызывать проблемы, отключаем по умолчанию)
# Раскомментируйте следующую строку, если хотите включить instant prompt:
# if [[ -r "${XDG_CACHE_HOME:-$HOME/.cache}/p10k-instant-prompt-${(%):-%n}.zsh" ]]; then
#   source "${XDG_CACHE_HOME:-$HOME/.cache}/p10k-instant-prompt-${(%):-%n}.zsh"
# fi

# Настройки директории
typeset -g POWERLEVEL9K_SHORTEN_STRATEGY="truncate_to_unique"
typeset -g POWERLEVEL9K_SHORTEN_DELIMITER=""
typeset -g POWERLEVEL9K_DIR_SHOW_WRITABLE=true

# Настройки Git
typeset -g POWERLEVEL9K_VCS_GIT_ICON=''
typeset -g POWERLEVEL9K_VCS_STAGED_ICON='±'
typeset -g POWERLEVEL9K_VCS_UNSTAGED_ICON='±'
typeset -g POWERLEVEL9K_VCS_UNTRACKED_ICON='●'
typeset -g POWERLEVEL9K_VCS_INCOMING_CHANGES_ICON='↓'
typeset -g POWERLEVEL9K_VCS_OUTGOING_CHANGES_ICON='↑'
typeset -g POWERLEVEL9K_VCS_CLEAN_BACKGROUND=2
typeset -g POWERLEVEL9K_VCS_CLEAN_FOREGROUND=0
typeset -g POWERLEVEL9K_VCS_MODIFIED_BACKGROUND=3
typeset -g POWERLEVEL9K_VCS_MODIFIED_FOREGROUND=0
typeset -g POWERLEVEL9K_VCS_UNTRACKED_BACKGROUND=1
typeset -g POWERLEVEL9K_VCS_UNTRACKED_FOREGROUND=0

# Цвета директории (темная тема - темно-синий фон, светлый текст)
typeset -g POWERLEVEL9K_DIR_DEFAULT_BACKGROUND=4
typeset -g POWERLEVEL9K_DIR_DEFAULT_FOREGROUND=254
typeset -g POWERLEVEL9K_DIR_HOME_BACKGROUND=4
typeset -g POWERLEVEL9K_DIR_HOME_FOREGROUND=254
typeset -g POWERLEVEL9K_DIR_HOME_SUBFOLDER_BACKGROUND=4
typeset -g POWERLEVEL9K_DIR_HOME_SUBFOLDER_FOREGROUND=254

# Время (темный фон, светлый текст)
{% raw %}typeset -g POWERLEVEL9K_TIME_FORMAT="%D{%H:%M:%S}"
{% endraw %}typeset -g POWERLEVEL9K_TIME_BACKGROUND=235
typeset -g POWERLEVEL9K_TIME_FOREGROUND=252

# Статус выполнения команд
typeset -g POWERLEVEL9K_STATUS_OK_BACKGROUND=2
typeset -g POWERLEVEL9K_STATUS_OK_FOREGROUND=0
typeset -g POWERLEVEL9K_STATUS_ERROR_BACKGROUND=1
typeset -g POWERLEVEL9K_STATUS_ERROR_FOREGROUND=0

# История команд (темный фон, светлый текст)
typeset -g POWERLEVEL9K_HISTORY_BACKGROUND=235
typeset -g POWERLEVEL9K_HISTORY_FOREGROUND=252

# Фоновые задачи
typeset -g POWERLEVEL9K_BACKGROUND_JOBS_BACKGROUND=3
typeset -g POWERLEVEL9K_BACKGROUND_JOBS_FOREGROUND=0

# Индикатор root (красный фон, светлый текст)
typeset -g POWERLEVEL9K_ROOT_INDICATOR_BACKGROUND=1
typeset -g POWERLEVEL9K_ROOT_INDICATOR_FOREGROUND=254

# Иконка ОС (темный фон, светлый текст)
typeset -g POWERLEVEL9K_OS_ICON_BACKGROUND=235
typeset -g POWERLEVEL9K_OS_ICON_FOREGROUND=252

# Дополнительные настройки для улучшения производительности
typeset -g POWERLEVEL9K_INSTANT_PROMPT=quiet
typeset -g POWERLEVEL9K_DISABLE_INSTANT_PROMPT=false

# Включаем обновление prompt асинхронно (улучшает производительность)
typeset -g POWERLEVEL9K_VCS_MAX_SYNC_LATENCY_SECONDS=0.01
typeset -g POWERLEVEL9K_VCS_LOADING_TEXT=""

# Улучшенная поддержка Git
typeset -g POWERLEVEL9K_VCS_BRANCH_ICON='\uF126 '
typeset -g POWERLEVEL9K_VCS_UNTRACKED_ICON='?'

# Цветовая схема
typeset -g POWERLEVEL9K_COLOR_SCHEME='dark'
